import{a as d,i as h,S as v,N as b}from"./assets/vendor-DircHDZc.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const c={modalMenuMobile:document.querySelector(".js-nav-mobile"),openMenuMobile:document.querySelector(".js-burger-menu"),closeMenuMobile:document.querySelector(".js-burger-button-close"),bodyLock:document.querySelector("body"),bodyUnlock:document.querySelector(".js-active")};function g(){c.modalMenuMobile.classList.toggle("isActive"),c.bodyLock.classList.toggle("lock")}function M(){c.openMenuMobile.addEventListener("click",g),c.closeMenuMobile.addEventListener("click",g),c.bodyUnlock.addEventListener("click",()=>{c.bodyLock.classList.remove("lock"),c.modalMenuMobile.classList.remove("isActive")})}d.defaults.baseURL="https://sound-wave.b.goit.study/api";const y=async(e={})=>{try{return(await d.get("/artists",{params:e})).data}catch(t){throw console.error("Помилка під час завантаження виконавців:",t),t}},L=async(e={})=>{try{return(await d.get("/feedbacks",{params:e})).data}catch(t){throw console.error("Помилка під час завантаження відгуків:",t),t}},w=async e=>{try{return(await d.get(`/artists/${e}`)).data}catch(t){throw console.error(`Помилка під час завантаження виконавця з id ${e}:`,t),t}},A=async e=>{try{return(await d.get(`/artists/${e}/albums`)).data}catch(t){throw console.error(`Помилка під час завантаження альбомів для виконавця з id ${e}:`,t),t}};h.settings({position:"topRight",timeout:4500,closeOnClick:!0,progressBar:!0,transitionIn:"fadeInUp",transitionOut:"fadeOut"});const E={error(e="Something went wrong. Please try again."){h.error({title:"Error",message:e,backgroundColor:"var(--color-affair-dark)",titleColor:"var(--color-white)",messageColor:"var(--opacity-white-60)",progressBarColor:"var(--color-affair-light)",overlay:!1})}};function k(e){var t,o;return e!=null&&e.response?`Server error: ${((t=e.response.data)==null?void 0:t.message)||((o=e.response.data)==null?void 0:o.error)||e.message}`:e!=null&&e.request?"Network error: no response from server.":(e==null?void 0:e.message)||"Unexpected error."}const i={list:null,loadMore:null},a={page:1,limit:8,total:0,loading:!1,lastBatchCount:0};document.addEventListener("DOMContentLoaded",()=>{if(i.list=document.getElementById("artists-list"),i.loadMore=document.getElementById("artists-load-more"),!i.list||!i.loadMore){console.warn("[Artists] Section markup not found");return}S()});function S(){$(),i.loadMore.addEventListener("click",q),i.list.addEventListener("click",I)}async function $(){a.page=1,i.list.innerHTML="",await p(a.page)}async function q(){await p(a.page+1)}async function p(e){if(!a.loading){f(!0);try{const t=await y({page:e,limit:a.limit}),{items:o,page:r,limit:s,total:n}=C(t,e,a.limit);a.page=r,a.limit=s,a.total=n,a.lastBatchCount=o.length,N(o),j(),B()}catch(t){console.error(t),E.error(k(t))}finally{f(!1)}}}function C(e,t,o){const r=Array.isArray(e==null?void 0:e.artists)?e.artists:[],s=Number((e==null?void 0:e.totalArtists)??0)||0,n=Number((e==null?void 0:e.page)??t)||t,l=Number((e==null?void 0:e.limit)??o)||o;return{items:r.map(T),total:s,page:n,limit:l}}function T(e){const t=e._id,o=e.strArtist,r=e.strArtistThumb||"",s=Array.isArray(e.genres)?e.genres.filter(Boolean):[],n=e.strBiographyEN||"";return{id:t,name:o,photo:r,genres:s,short:n}}function N(e){const t=e.map(P).join("");i.list.insertAdjacentHTML("beforeend",t)}function P(e){const t=(e.genres||[]).map(o=>`<span class="tag">${u(o)}</span>`).join("");return`
    <li class="artist-card" data-id="${e.id}">
      ${e.photo?`<img class="artist-cover" src="${e.photo}" alt="${u(e.name)}" loading="lazy" />`:""}
      <div class="tags">${t}</div>
      <h4 class="artist-name">${u(e.name)}</h4>
      <p class="artist-desc">${u(e.short)}</p>
      <div class="card-actions">
        <button class="link-more" type="button" data-learn-more>
          Learn More
          <svg class="icon-learn-more" width="24" height="24" aria-hidden="true">
            <use href="/img/icons.svg#icon-filled-arrow"></use>
          </svg>
        </button>
      </div>
    </li>
  `}function j(){if(!i.loadMore)return;const e=i.list.children.length,t=a.total>0&&e>=a.total;i.loadMore.hidden=!1,i.loadMore.disabled=t||a.loading}function B(){i.list.children.length===0&&(i.list.innerHTML='<li class="artists-empty">No artists found</li>')}function f(e){a.loading=e,i.loadMore&&(i.loadMore.disabled=e||i.loadMore.hidden)}function I(e){if(!e.target.closest("[data-learn-more]"))return;const o=e.target.closest(".artist-card"),r=o==null?void 0:o.dataset.id;if(!r)return;const s=new CustomEvent("artists:open",{bubbles:!0,detail:{id:r,fetchDetails:async()=>{try{return await A(r)}catch{return await w(r)}}}});o.dispatchEvent(s)}function u(e=""){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}const O="/projectRise/assets/icons-oErLsqgQ.svg";async function x(){const{data:e}=await L({limit:10,page:1}),t=document.querySelector(".swiper-wrapper");t.innerHTML=e.map(o=>`
    <div class="swiper-slide">
      <div class="feedback-slide">
        <div class="rating" data-score="${o.rating}"></div>
        <p class="feedback-text">${o.descr}</p>
        <h4 class="feedback-name">${o.name}</h4>
      </div>
    </div>
      `).join(""),H(),new v(".swiper",{modules:[b],slidesPerView:1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},allowTouchMove:!0,on:{init(){U(this),m(this)},slideChange(){m(this)}}})}function H(){document.querySelectorAll(".rating").forEach(t=>{const o=parseInt(t.dataset.score,10)||0;t.innerHTML="";for(let r=1;r<=5;r++){const s=`
        <svg width="20" height="20" class="star" style="fill: ${r<=o?"var(--color-affair)":"var(--color-scheme-1-text)"}">
          <use href="${O}#icon-star"></use>
        </svg>
      `;t.insertAdjacentHTML("beforeend",s)}})}function U(e){const t=document.querySelector(".swiper-pagination");t.innerHTML="",["first","middle","last"].forEach(r=>{const s=document.createElement("button");s.classList.add("custom-dot",`dot-${r}`),s.setAttribute("type","button"),s.addEventListener("click",()=>{r==="first"&&e.slideTo(0),r==="middle"&&e.slideTo(Math.floor(e.slides.length/2)),r==="last"&&e.slideTo(e.slides.length-1)}),t.appendChild(s)})}function m(e){document.querySelectorAll(".custom-dot").forEach(o=>o.classList.remove("active")),e.realIndex===0?document.querySelector(".dot-first").classList.add("active"):e.realIndex===e.slides.length-1?document.querySelector(".dot-last").classList.add("active"):document.querySelector(".dot-middle").classList.add("active")}x();M();
//# sourceMappingURL=index.js.map
