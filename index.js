import{a as u,i as f}from"./assets/vendor-CM57OJEz.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const c={modalMenuMobile:document.querySelector(".js-nav-mobile"),openMenuMobile:document.querySelector(".js-burger-menu"),closeMenuMobile:document.querySelector(".js-burger-button-close"),bodyLock:document.querySelector("body"),bodyUnlock:document.querySelector(".js-active")};function g(){c.modalMenuMobile.classList.toggle("isActive"),c.bodyLock.classList.toggle("lock")}function h(){c.openMenuMobile.addEventListener("click",g),c.closeMenuMobile.addEventListener("click",g),c.bodyUnlock.addEventListener("click",()=>{c.bodyLock.classList.remove("lock"),c.modalMenuMobile.classList.remove("isActive")})}u.defaults.baseURL="https://sound-wave.b.goit.study/api";const b=async(t={})=>{try{return(await u.get("/artists",{params:t})).data}catch(e){throw console.error("Помилка під час завантаження виконавців:",e),e}},M=async t=>{try{return(await u.get(`/artists/${t}`)).data}catch(e){throw console.error(`Помилка під час завантаження виконавця з id ${t}:`,e),e}},v=async t=>{try{return(await u.get(`/artists/${t}/albums`)).data}catch(e){throw console.error(`Помилка під час завантаження альбомів для виконавця з id ${t}:`,e),e}};f.settings({position:"topRight",timeout:4500,closeOnClick:!0,progressBar:!0,transitionIn:"fadeInUp",transitionOut:"fadeOut"});const y={error(t="Something went wrong. Please try again."){f.error({title:"Error",message:t,backgroundColor:"var(--color-affair-dark)",titleColor:"var(--color-white)",messageColor:"var(--opacity-white-60)",progressBarColor:"var(--color-affair-light)",overlay:!1})}};function L(t){var e,r;return t!=null&&t.response?`Server error: ${((e=t.response.data)==null?void 0:e.message)||((r=t.response.data)==null?void 0:r.error)||t.message}`:t!=null&&t.request?"Network error: no response from server.":(t==null?void 0:t.message)||"Unexpected error."}const n={list:null,loadMore:null},a={page:1,limit:8,total:0,loading:!1,lastBatchCount:0};document.addEventListener("DOMContentLoaded",()=>{if(n.list=document.getElementById("artists-list"),n.loadMore=document.getElementById("artists-load-more"),!n.list||!n.loadMore){console.warn("[Artists] Section markup not found");return}w()});function w(){A(),n.loadMore.addEventListener("click",E),n.list.addEventListener("click",O)}async function A(){a.page=1,n.list.innerHTML="",await p(a.page)}async function E(){await p(a.page+1)}async function p(t){if(!a.loading){m(!0);try{const e=await b({page:t,limit:a.limit}),{items:r,page:i,limit:o,total:s}=$(e,t,a.limit);a.page=i,a.limit=o,a.total=s,a.lastBatchCount=r.length,C(r),B(),N()}catch(e){console.error(e),y.error(L(e))}finally{m(!1)}}}function $(t,e,r){const i=Array.isArray(t==null?void 0:t.artists)?t.artists:[],o=Number((t==null?void 0:t.totalArtists)??0)||0,s=Number((t==null?void 0:t.page)??e)||e,l=Number((t==null?void 0:t.limit)??r)||r;return{items:i.map(k),total:o,page:s,limit:l}}function k(t){const e=t._id,r=t.strArtist,i=t.strArtistThumb||"",o=Array.isArray(t.genres)?t.genres.filter(Boolean):[],s=t.strBiographyEN||"";return{id:e,name:r,photo:i,genres:o,short:s}}function C(t){const e=t.map(S).join("");n.list.insertAdjacentHTML("beforeend",e)}function S(t){const e=(t.genres||[]).map(r=>`<span class="tag">${d(r)}</span>`).join("");return`
    <li class="artist-card" data-id="${t.id}">
      ${t.photo?`<img class="artist-cover" src="${t.photo}" alt="${d(t.name)}" loading="lazy" />`:""}
      <div class="tags">${e}</div>
      <h4 class="artist-name">${d(t.name)}</h4>
      <p class="artist-desc">${d(t.short)}</p>
      <div class="card-actions">
        <button class="link-more" type="button" data-learn-more>
          Learn More
          <svg class="icon" width="24" height="24" aria-hidden="true">
            <!-- если спрайт инлайн в index.html: use href="#icon-filled-arrow" -->
            <use href="./img/icons.svg#icon-filled-arrow"></use>
          </svg>
        </button>
      </div>
    </li>
  `}function B(){if(!n.loadMore)return;const t=n.list.children.length,e=a.total>0&&t>=a.total;n.loadMore.hidden=!1,n.loadMore.disabled=e||a.loading}function N(){n.list.children.length===0&&(n.list.innerHTML='<li class="artists-empty">No artists found</li>')}function m(t){a.loading=t,n.loadMore&&(n.loadMore.disabled=t||n.loadMore.hidden)}function O(t){if(!t.target.closest("[data-learn-more]"))return;const r=t.target.closest(".artist-card"),i=r==null?void 0:r.dataset.id;if(!i)return;const o=new CustomEvent("artists:open",{bubbles:!0,detail:{id:i,fetchDetails:async()=>{try{return await v(i)}catch{return await M(i)}}}});r.dispatchEvent(o)}function d(t=""){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}h();
//# sourceMappingURL=index.js.map
