{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/header.js","../src/js/api.js","../src/img/icons.svg?url","../src/js/artists.js","../src/js/artists-details-modal.js","../src/js/feedback.js","../src/main.js"],"sourcesContent":["export const refs = {\n\tmodalMenuMobile: document.querySelector('.js-nav-mobile'),\n\topenMenuMobile: document.querySelector('.js-burger-menu'),\n\tcloseMenuMobile: document.querySelector('.js-burger-button-close'),\n\tbodyLock: document.querySelector('body'),\n\tbodyUnlock: document.querySelector('.js-active'),\n}\n\n","import { refs } from \"./refs\";\n\nfunction toggelModal() {\n\trefs.modalMenuMobile.classList.toggle('isActive');\n\trefs.bodyLock.classList.toggle('lock');\n}\nexport function mobileMenu() {\n\trefs.openMenuMobile.addEventListener('click', toggelModal);\n\trefs.closeMenuMobile.addEventListener('click', toggelModal);\n\trefs.bodyUnlock.addEventListener('click', () => {\n\trefs.bodyLock.classList.remove('lock');\n\trefs.modalMenuMobile.classList.remove('isActive');\n});\t\n}\n","// Імпортуємо axios для зручних HTTP-запитів\nimport axios from 'axios';\n\n// Встановлюємо базовий URL для всіх запитів до API\naxios.defaults.baseURL = 'https://sound-wave.b.goit.study/api';\n\n// --- ОСНОВНІ ФУНКЦІЇ ---\n\n/**\n * Отримує список виконавців з можливістю фільтрації, сортування та пагінації.\n * @param {object} [params={}] - Об'єкт з параметрами запиту (limit, page, name, sortName, genre).\n * @returns {Promise<Array>} Проміс, який повертає масив об'єктів виконавців.\n */\nexport const getArtists = async (params = {}) => {\n  try {\n    const response = await axios.get('/artists', { params });\n    return response.data;\n  } catch (error) {\n    console.error('Помилка під час завантаження виконавців:', error);\n    throw error; // Прокидаємо помилку для обробки в UI (показ повідомлення)\n  }\n};\n\n/**\n * Отримує список відгуків з пагінацією.\n * @param {object} [params={}] - Об'єкт з параметрами запиту (limit, page).\n * @returns {Promise<Object>} Проміс, який повертає об'єкт з даними { data: [], total, page, limit }.\n */\nexport const getFeedbacks = async (params = {}) => {\n  try {\n    const response = await axios.get('/feedbacks', { params });\n    return response.data;\n  } catch (error) {\n    console.error('Помилка під час завантаження відгуків:', error);\n    throw error;\n  }\n};\n\n/**\n * Отримує інформацію про одного виконавця та загальний список його треків (без групування по альбомах).\n * @param {string} id - Унікальний ідентифікатор виконавця.\n * @returns {Promise<Object|null>} Проміс, який повертає об'єкт виконавця з ключем `tracksList`.\n */\nexport const getArtistById = async id => {\n  try {\n    const response = await axios.get(`/artists/${id}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Помилка під час завантаження виконавця з id ${id}:`, error);\n    throw error;\n  }\n};\n\n/**\n * Отримує повну інформацію про виконавця, включаючи список його альбомів та треків, згрупованих по альбомах.\n * Це основна функція для заповнення модального вікна згідно ТЗ.\n * @param {string} id - Унікальний ідентифікатор виконавця.\n * @returns {Promise<Object|null>} Проміс, який повертає повний об'єкт виконавця з ключем `albumsList`.\n */\nexport const getArtistDetailsWithAlbums = async id => {\n  try {\n    const response = await axios.get(`/artists/${id}/albums`);\n    return response.data;\n  } catch (error) {\n    console.error(\n      `Помилка під час завантаження альбомів для виконавця з id ${id}:`,\n      error\n    );\n    throw error;\n  }\n};\n\n// ФУНКЦІЇ ДЛЯ ДОДАТКОВИХ ЗАВДАНЬ (закоментовано на майбутнє)\n\n// /**\n//  * Отримує список усіх музичних жанрів для фільтра.\n//  * @returns {Promise<Array<Object>>} Проміс, який повертає масив об'єктів жанрів (напр., [{_id: '...', genre: 'Rock'}]).\n//  */\n// export const getGenres = async () => {\n//   try {\n//     const response = await axios.get('/genres');\n//     return response.data;\n//   } catch (error) {\n//     console.error('Помилка під час завантаження жанрів:', error);\n//     throw error;\n//   }\n// };\n\n// /**\n//  * Надсилає новий відгук на сервер.\n//  * Важливо: валідацію даних потрібно проводити ПЕРЕД викликом цієї функції.\n//  * @param {object} feedbackData - Об'єкт з даними відгуку.\n//  * @param {string} feedbackData.name - Ім'я користувача (2-16 символів).\n//  * @param {number} feedbackData.rating - Рейтинг (від 1 до 5).\n//  * @param {string} feedbackData.descr - Текст відгуку (10-512 символів).\n//  * @returns {Promise<Object>} Проміс, який повертає об'єкт з повідомленням про успіх (напр., { message: \"...\" }).\n//  */\n// export const postFeedback = async (feedbackData) => {\n//   try {\n//     const response = await axios.post('/feedbacks', feedbackData);\n//     return response.data;\n//   } catch (error) {\n//     console.error('Помилка під час відправки відгуку:', error.response ? error.response.data : error.message);\n//     throw error;\n//   }\n// };\n","export default \"__VITE_ASSET__BZYktl7F__\"","import { getArtists, getArtistDetailsWithAlbums, getArtistById } from './api.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport spriteUrl from '../img/icons.svg?url';\n\niziToast.settings({\n  position: 'topRight',\n  timeout: 4500,\n  closeOnClick: true,\n  progressBar: true,\n  transitionIn: 'fadeInUp',\n  transitionOut: 'fadeOut',\n});\n\nconst toast = {\n  error(message = 'Something went wrong. Please try again.') {\n    iziToast.error({\n      title: 'Error',\n      message,\n      backgroundColor: 'var(--color-affair-dark)',   \n      titleColor: 'var(--color-white)',              \n      messageColor: 'var(--opacity-white-60)',       \n      progressBarColor: 'var(--color-affair-light)',\n      overlay: false,\n    });\n  },\n};\n\nfunction getAxiosErrorMessage(err) {\n  if (err?.response) {\n    const serverMsg =\n      err.response.data?.message ||\n      err.response.data?.error ||\n      err.message;\n    return `Server error: ${serverMsg}`;\n  }\n  if (err?.request) {\n    return 'Network error: no response from server.';\n  }\n  return err?.message || 'Unexpected error.';\n}\n\nconst refs = { list: null, loadMore: null };\n\nconst STATE = {\n  page: 1,\n  limit: 8,\n  total: 0,\n  loading: false,\n  lastBatchCount: 0,\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  refs.list = document.getElementById('artists-list');\n  refs.loadMore = document.getElementById('artists-load-more');\n  if (!refs.list || !refs.loadMore) {\n    console.warn('[Artists] Section markup not found');\n    return;\n  }\n  init();\n});\n\nfunction init() {\n  loadFirstPage();\n  refs.loadMore.addEventListener('click', onLoadMore);\n  refs.list.addEventListener('click', onCardClick);\n}\n\nasync function loadFirstPage() {\n  STATE.page = 1;\n  refs.list.innerHTML = '';\n  await loadPage(STATE.page);\n}\n\nasync function onLoadMore() {\n  await loadPage(STATE.page + 1);\n}\n\nasync function loadPage(page) {\n  if (STATE.loading) return;\n  setLoading(true);\n  try {\n    const payload = await getArtists({ page, limit: STATE.limit });\n\n    const { items, page: realPage, limit, total } =\n      normalizeListPayload(payload, page, STATE.limit);\n\n    STATE.page = realPage;\n    STATE.limit = limit;\n    STATE.total = total;\n    STATE.lastBatchCount = items.length;\n\n    renderCards(items);\n    updateLoadMoreVisibility();\n    showEmptyIfNeeded();\n  } catch (err) {\n    console.error(err);\n    toast.error(getAxiosErrorMessage(err));\n  } finally {\n    setLoading(false);\n  }\n}\n\nfunction normalizeListPayload(payload, fallbackPage, fallbackLimit) {\n  const arr = Array.isArray(payload?.artists) ? payload.artists : [];\n  const total = Number(payload?.totalArtists ?? 0) || 0;\n  const page = Number(payload?.page ?? fallbackPage) || fallbackPage;\n  const limit = Number(payload?.limit ?? fallbackLimit) || fallbackLimit;\n\n  return {\n    items: arr.map(mapArtistBase),\n    total,\n    page,\n    limit,\n  };\n}\n\nfunction mapArtistBase(raw) {\n  const id = raw._id;\n  const name = raw.strArtist;\n  const photo = raw.strArtistThumb || '';\n  const genres = Array.isArray(raw.genres) ? raw.genres.filter(Boolean) : [];\n  const short = raw.strBiographyEN || '';\n  return { id, name, photo, genres, short };\n}\n\nfunction renderCards(items) {\n  const markup = items.map(cardTemplate).join('');\n  refs.list.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction cardTemplate(a) {\n  const tags = (a.genres || [])\n    .map(g => `<span class=\"tag\">${escapeHtml(g)}</span>`)\n    .join('');\n  return `\n    <li class=\"artist-card\" data-id=\"${a.id}\">\n      ${a.photo ? `<img class=\"artist-cover\" src=\"${a.photo}\" alt=\"${escapeHtml(a.name)}\" loading=\"lazy\" />` : ''}\n      <div class=\"tags\">${tags}</div>\n      <h4 class=\"artist-name\">${escapeHtml(a.name)}</h4>\n      <p class=\"artist-desc\">${escapeHtml(a.short)}</p>\n      <div class=\"card-actions\">\n        <button class=\"link-more\" type=\"button\" data-learn-more>\n          Learn More\n          <svg class=\"icon-learn-more\" width=\"24\" height=\"24\" aria-hidden=\"true\">\n            <use href=\"${spriteUrl}#icon-filled-arrow\"></use>\n          </svg>\n        </button>\n      </div>\n    </li>\n  `;\n}\n\nfunction updateLoadMoreVisibility() {\n  if (!refs.loadMore) return;\n  const totalLoaded = refs.list.children.length;\n  const finished = STATE.total > 0 && totalLoaded >= STATE.total;\n  refs.loadMore.hidden = false;\n  refs.loadMore.disabled = finished || STATE.loading;\n}\n\nfunction showEmptyIfNeeded() {\n  if (refs.list.children.length === 0) {\n    refs.list.innerHTML = `<li class=\"artists-empty\">No artists found</li>`;\n  }\n}\n\nfunction setLoading(flag) {\n  STATE.loading = flag;\n  if (refs.loadMore) refs.loadMore.disabled = flag || refs.loadMore.hidden;\n}\n\nfunction onCardClick(e) {\n  const btn = e.target.closest('[data-learn-more]');\n  if (!btn) return;\n  const card = e.target.closest('.artist-card');\n  const id = card?.dataset.id;\n  if (!id) return;\n\n  const ev = new CustomEvent('artists:open', {\n    bubbles: true,\n    detail: {\n      id,\n      fetchDetails: async () => {\n        try {\n          return await getArtistDetailsWithAlbums(id);\n        } catch {\n          return await getArtistById(id);\n        }\n      },\n    },\n  });\n\n  card.dispatchEvent(ev);\n}\n\nfunction escapeHtml(str = '') {\n  return String(str)\n    .replace(/&/g, '&amp;').replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;').replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\n\n","export function initArtistModal() {\n  const modal = document.getElementById('artist-modal');\n  const overlay = document.getElementById('artist-modal-overlay');\n  const closeBtn = document.getElementById('artist-modal-close');\n\n  const nameEl = modal.querySelector('.artist-name');\n  const imageEl = modal.querySelector('.artist-image img');\n  const infoEl = modal.querySelector('.artist-info');\n  const bioEl = modal.querySelector('.artist-bio p');\n  const genresEl = modal.querySelector('.artist-genres');\n  const albumsEl = modal.querySelector('.artist-albums');\n\n  let lastFocusedElement = null; // збережемо, хто відкрив модалку\n\n  const getYoutubeLink = vid => {\n    if (!vid) return '';\n    return vid.startsWith('http')\n      ? vid\n      : `https://www.youtube.com/watch?v=${vid}`;\n  };\n\n  const formatDuration = ms => {\n    if (!ms || isNaN(ms)) return '-';\n    const totalSeconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  document.addEventListener('artists:open', async e => {\n    const { id, fetchDetails } = e.detail;\n\n    try {\n      const artist = await fetchDetails();\n\n      nameEl.textContent = artist.strArtist || 'Unknown Artist';\n      imageEl.src = artist.strArtistThumb || '';\n      imageEl.alt = artist.strArtist || 'Artist';\n\n      infoEl.innerHTML = `\n        <li><strong>Years active:</strong> ${artist.intFormedYear || 'N/A'} – ${\n        artist.strDisbanded || 'present'\n      }</li>\n        <li><strong>Sex:</strong> ${artist.strGender || 'N/A'}</li>\n        <li><strong>Members:</strong> ${artist.intMembers || 'N/A'}</li>\n        <li><strong>Country:</strong> ${artist.strCountry || 'N/A'}</li>\n      `;\n\n      bioEl.textContent = artist.strBiographyEN || 'No biography available.';\n\n      genresEl.innerHTML = (artist.genres || [])\n        .map(g => `<span>${g}</span>`)\n        .join('');\n\n      if (artist.albumsList && artist.albumsList.length > 0) {\n        albumsEl.innerHTML = artist.albumsList\n          .map(album => {\n            const tracksMarkup =\n              Array.isArray(album.tracks) && album.tracks.length > 0\n                ? album.tracks\n                    .map(\n                      track => `\n            <div class=\"track-row\">\n              <span class=\"track-title\">${track.strTrack || 'N/A'}</span>\n              <span class=\"track-duration\">${formatDuration(\n                track.intDuration\n              )}</span>\n              ${\n                track.movie\n                  ? `<a href=\"${getYoutubeLink(\n                      track.movie\n                    )}\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"track-link\">▶</a>`\n                  : '<span style=\"opacity: 0.5;\">—</span>'\n              }\n            </div>\n          `\n                    )\n                    .join('')\n                : '<p>No tracks</p>';\n\n            return `\n      <div class=\"album\">\n        <h4>${album.strAlbum || 'Untitled'}</h4>\n        ${tracksMarkup}\n      </div>\n    `;\n          })\n          .join('');\n      } else {\n        albumsEl.innerHTML = '<p>No albums found</p>';\n      }\n\n      openModal();\n    } catch (err) {\n      console.error('Modal error:', err);\n    }\n  });\n\n  function openModal() {\n    lastFocusedElement = document.activeElement; // зберегли останній фокус\n    modal.setAttribute('aria-hidden', 'false');\n    modal.classList.add('open');\n    document.body.classList.add('no-scroll');\n    closeBtn.focus(); // одразу сфокусуємось на кнопці закриття\n  }\n\n  function closeModal() {\n    if (document.activeElement) {\n      document.activeElement.blur(); // знімаємо фокус з кнопки\n    }\n    modal.setAttribute('aria-hidden', 'true');\n    modal.classList.remove('open');\n    document.body.classList.remove('no-scroll');\n\n    if (lastFocusedElement) {\n      lastFocusedElement.focus(); // повертаємо фокус назад\n    }\n  }\n\n  closeBtn.addEventListener('click', closeModal);\n  overlay.addEventListener('click', closeModal);\n  document.addEventListener('keydown', e => {\n    if (e.key === 'Escape') closeModal();\n  });\n}\n","import Swiper from 'swiper';\nimport { Navigation } from 'swiper/modules';\n\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport { getFeedbacks } from './api.js';\n\nimport icons from '/img/icons.svg?url';\n\n// swiper's slides\nasync function initFeedbacks() {\n  const { data: feedbacks } = await getFeedbacks({ limit: 10, page: 1 });\n\n  const wrapper = document.querySelector('.swiper-wrapper');\n\n  wrapper.innerHTML = feedbacks\n    .map(\n      item => `\n    <div class=\"swiper-slide\">\n      <div class=\"feedback-slide\">\n        <div class=\"rating\" data-score=\"${item.rating}\"></div>\n        <p class=\"feedback-text\">${item.descr}</p>\n        <h4 class=\"feedback-name\">${item.name}</h4>\n      </div>\n    </div>\n      `\n    )\n    .join('');\n\n  renderStars();\n\n  // swiper init\n  const swiper = new Swiper('.swiper', {\n    modules: [Navigation],\n    slidesPerView: 1,\n    navigation: {\n      nextEl: '.custom-swiper-btn-next',\n      prevEl: '.custom-swiper-btn-prev',\n    },\n    allowTouchMove: true,\n    on: {\n      init() {\n        createCustomPagination(this);\n        updateCustomPagination(this);\n      },\n      slideChange() {\n        updateCustomPagination(this);\n      },\n    },\n  });\n}\n\n// stars\nfunction renderStars() {\n  const ratings = document.querySelectorAll('.rating');\n  ratings.forEach(ratingEl => {\n    const score = parseInt(ratingEl.dataset.score, 10) || 0;\n    ratingEl.innerHTML = '';\n\n    for (let i = 1; i <= 5; i++) {\n      const svg = `\n        <svg width=\"20\" height=\"20\" class=\"star\" style=\"fill: ${\n          i <= score ? 'var(--color-affair)' : 'var(--color-scheme-1-text)'\n        }\">\n          <use href=\"${icons}#icon-star\"></use>\n        </svg>\n      `;\n      ratingEl.insertAdjacentHTML('beforeend', svg);\n    }\n  });\n}\n\n// pagination for swiper\nfunction createCustomPagination(swiper) {\n  const pagination = document.querySelector('.swiper-pagination');\n  pagination.innerHTML = '';\n\n  const dots = ['first', 'middle', 'last'];\n  dots.forEach(type => {\n    const dot = document.createElement('button');\n    dot.classList.add('custom-dot', `dot-${type}`);\n    dot.setAttribute('type', 'button');\n    dot.addEventListener('click', () => {\n      if (type === 'first') swiper.slideTo(0);\n      if (type === 'middle')\n        swiper.slideTo(Math.floor(swiper.slides.length / 2));\n      if (type === 'last') swiper.slideTo(swiper.slides.length - 1);\n    });\n    pagination.appendChild(dot);\n  });\n}\n\nfunction updateCustomPagination(swiper) {\n  const dots = document.querySelectorAll('.custom-dot');\n  dots.forEach(dot => dot.classList.remove('active'));\n\n  if (swiper.realIndex === 0) {\n    document.querySelector('.dot-first').classList.add('active');\n  } else if (swiper.realIndex === swiper.slides.length - 1) {\n    document.querySelector('.dot-last').classList.add('active');\n  } else {\n    document.querySelector('.dot-middle').classList.add('active');\n  }\n}\n\ninitFeedbacks();\n","import { mobileMenu } from './js/header';\nmobileMenu();\n\nimport './js/api.js';\nimport './js/artists.js';\n\nimport { initArtistModal } from './js/artists-details-modal.js';\ndocument.addEventListener('DOMContentLoaded', () => {\n  initArtistModal();\n});\n\nimport './js/feedback.js';\n"],"names":["refs","toggelModal","mobileMenu","axios","getArtists","params","error","getFeedbacks","getArtistById","id","getArtistDetailsWithAlbums","icons","iziToast","toast","message","getAxiosErrorMessage","err","_a","_b","STATE","init","loadFirstPage","onLoadMore","onCardClick","loadPage","page","setLoading","payload","items","realPage","limit","total","normalizeListPayload","renderCards","updateLoadMoreVisibility","showEmptyIfNeeded","fallbackPage","fallbackLimit","arr","mapArtistBase","raw","name","photo","genres","short","markup","cardTemplate","a","tags","g","escapeHtml","spriteUrl","totalLoaded","finished","flag","e","card","ev","str","initArtistModal","modal","overlay","closeBtn","nameEl","imageEl","infoEl","bioEl","genresEl","albumsEl","lastFocusedElement","getYoutubeLink","vid","formatDuration","ms","totalSeconds","minutes","seconds","fetchDetails","artist","album","tracksMarkup","track","openModal","closeModal","initFeedbacks","feedbacks","wrapper","item","renderStars","Swiper","Navigation","createCustomPagination","updateCustomPagination","ratingEl","score","i","svg","swiper","pagination","type","dot"],"mappings":"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"}